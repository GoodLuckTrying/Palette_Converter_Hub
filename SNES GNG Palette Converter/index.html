<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SNES Palette Converter</title>
    <link rel="icon" type="image/png" href="../Icons/Super_Nintendo_Entertainment_System.png">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <div style="text-align: left; margin-bottom: 10px;">
                <a href="../index.html" style="color: white; text-decoration: none; font-size: 0.9rem; opacity: 0.9;">‚Üê Return to Hub</a>
            </div>
            <h1 style="display: flex; align-items: center; justify-content: center; gap: 15px;">
                <img src="../Icons/Super_Nintendo_Entertainment_System.png" alt="SNES" style="width: 48px; height: 48px; object-fit: contain;">
                SNES Palette Converter
            </h1>
            <p>Convert RGB hex palettes to SNES BGR format and TPL files. Made for Super Ghouls N' Ghosts but may work for other SNES games.</p>
        </header>

        <div class="upload-section">
            <h2>üìÅ Upload Existing TPL File</h2>
            <div class="upload-controls">
                <input type="file" id="tpl-upload" accept=".tpl" />
                <button id="upload-btn" class="convert-btn">Load TPL File</button>
            </div>
            <div class="upload-info">
                <p>Upload a TPL file to automatically populate both RGB and BGR input fields with the extracted palette data.</p>
            </div>
        </div>

        <main>
            <div class="input-section">
                <h2>Input Format</h2>
                <div class="format-tabs">
                    <button class="tab-btn active" data-format="rgb">RGB Hex (16 lines)</button>
                    <button class="tab-btn" data-format="bgr">BGR LSB Order</button>
                </div>

                <div class="input-container">
                    <div id="rgb-input" class="input-area active">
                        <label for="rgb-palette">Enter 16 RGB hex colors (one per line):</label>
                        <textarea id="rgb-palette" placeholder="000000&#10;526384&#10;7384a5&#10;94a5c6&#10;a5b5d6&#10;f7f7f7&#10;c6c694&#10;a5a573&#10;735200&#10;846300&#10;b59473&#10;e7c6a5&#10;0063b5&#10;c66300&#10;840000&#10;101010"></textarea>
                        <div class="palette-preview" id="rgb-preview"></div>
                        <div class="conversion-controls">
                            <button id="rgb-to-bgr-btn" class="convert-btn secondary">Convert to BGR LSB</button>
                        </div>
                    </div>

                    <div id="bgr-input" class="input-area">
                        <label for="bgr-palette">Enter BGR LSB order data:</label>
                        <textarea id="bgr-palette" placeholder="82 A0 8A 41 0E 52 92 62 D4 6A DE 7B 18 4B 94 3A 4E 01 90 01 56 3A 1C 53 80 59 98 01 10 00 42 08"></textarea>
                        <div class="palette-preview" id="bgr-preview"></div>
                                                 <div class="warning-note">
                             ‚ö†Ô∏è <strong>Note:</strong> The example BGR data may not convert to the exact RGB colors shown above. 
                             Input your actual BGR data for accurate conversion.
                         </div>
                         <div class="info-note">
                             ‚ÑπÔ∏è <strong>Precision Note:</strong> Converting between RGB (8-bit) and BGR (15-bit) formats may result in slight color differences due to precision loss. 
                             This is normal behavior for 15-bit color formats and matches retro game hardware limitations.
                         </div>
                        <div class="conversion-controls">
                            <button id="bgr-to-rgb-btn" class="convert-btn secondary">Convert to RGB Hex</button>
                        </div>
                    </div>
                </div>

                <button id="convert-btn" class="convert-btn">Convert to TPL</button>
                
                <div class="help-text">
                    <p>üí° <strong>How to use:</strong></p>
                    <ul>
                        <li>Enter your palette data in either format above</li>
                        <li>Use the conversion buttons to switch between formats</li>
                        <li>Click "Convert to TPL" to generate the file</li>
                        <li>The TPL content preview will appear below</li>
                        <li>Click "Download TPL File" to save the binary TPL file</li>
                        <li>Check the browser console (F12) for detailed conversion info</li>
                    </ul>
                </div>
            </div>

            <div class="output-section" id="output-section" style="display: none;">
                <h2>Output</h2>
                <div class="tlp-preview">
                    <h3>TPL File Preview (Text Format):</h3>
                    <p class="format-note">Note: The actual downloaded file will be in binary TPL format for Tile Layer Pro</p>
                    <pre id="tlp-content"></pre>
                </div>
                
                <div class="download-section">
                    <button id="download-btn" class="download-btn">Download TPL File</button>
                    <span class="filename-info">File will be saved as: <code id="filename">palette.tpl</code></span>
                </div>

                <div class="palette-comparison">
                    <h3>Palette Comparison</h3>
                    <div class="comparison-grid">
                        <div class="original-palette">
                            <h4>Original</h4>
                            <div id="original-colors"></div>
                        </div>
                        <div class="converted-palette">
                            <h4>Converted</h4>
                            <div id="converted-colors"></div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <footer>
            <p>SNES Palette Converter - Made for Super Ghouls N' Ghosts, may work for other SNES games</p>
            <p>Made by <a href="https://github.com/GoodLuckTrying" target="_blank" style="color: white; text-decoration: underline;">GoodLuckTrying/Wolfric</a></p>
        </footer>
    </div>

    <script src="script.js"></script>
</body>
</html>
